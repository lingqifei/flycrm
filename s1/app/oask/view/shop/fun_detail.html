<script>
// 列表加载
$(document).ready(function () {
    $("body").on("click", ".nav-tabs", function (){
        $(".tab-content").find(".tab-pane.active table.ajax-list-table").each(function(key,row){
            ajaxDetailData($(this));
        });
    });
    $(".tab-content").find(".tab-pane table.ajax-list-table").each(function(key,row){
        ajaxDetailData($(this));
    })
})

//订单详细数据加载
function  ajaxDetailData(object){
    target=object.attr("data-url");
    log(target);
    $.ajaxSettings.async = true;
    $.get(target).success(function (jsonData) {
        html=ajaxDetailDataTpl(jsonData.data,jsonData.type);
        object.find("tbody").html(html);
        object.find('tfoot label').html(jsonData.total_money);
    },"json");

}


//订单详细数据加载
function  ajaxDetailDataTpl(data,type){

    var html="";
    $.each(data,function(key,row) {
        switch (type) {
            case 'linkman':
                html += '<tr>';
                html += '<td>' + row.name + '</td>';
                html += '<td>' + row.gender + '</td>';
                html += '<td>' + row.postion + '</td>';
                html += '<td>' + row.mobile + '</td>';
                html += '<td>' + row.tel + '</td>';
                html += '<td>' + row.qicq + '</td>';
                html += '<td>' + row.address + '</td>';
                html += '<td>' + row.remark + '</td>';
                html += '<td>';
                html += '    <lqf_link><a class="ajax-open" data-url="{:url(\'SupLinkman/edit\')}"  data-ids="{\'id\':\'' + row.id + '\'}" data-title="修改" data-calback="ajaxDetailData($(\'.ajax-list-table.linkman\'))">修改</a></lqf_link>';
                html += '    <lqf_link><a class="ajax-del" data-url="{:url(\'SupLinkman/del\')}"  data-ids="{\'id\':\'' + row.id + '\'}"  data-calback="ajaxDetailData($(\'.ajax-list-table.linkman\'))">删除</a></lqf_link>';
                html += '</td>';
                html += '</tr>';
                break;
            case 'salcontract':
                html += '<tr>';
                html += '<td>' + row.name + '</td>';
                html += '<td>' + row.money + '</td>';
                html += '<td>' + row.back_money + '</td>';
                html += '<td>' + row.zero_money + '</td>';
                html += '<td>' + row.invoice_money + '</td>';
                html += '<td>' + row.start_date + '</td>';
                html += '<td>' + row.end_date + '</td>';
                html += '<td>' + row.status + '</td>';
                html += '<td>' + row.create_time + '</td>';
                html += '<td>';
                html += '    <lqf_link><a class="ajax-open" data-url="{:url(\'SalContract/edit\')}"  data-ids="{\'id\':\'' + row.id + '\'}" data-title="修改" data-calback="ajaxDetailData($(\'.ajax-list-table.salcontract\'))">修改</a></lqf_link>';
                html += '    <lqf_link><a class="ajax-del" data-url="{:url(\'SalContract/del\')}"  data-ids="{\'id\':\'' + row.id + '\'}"  data-calback="ajaxDetailData($(\'.ajax-list-table.salcontract\'))">删除</a></lqf_link>';
                html += '</td>';
                html += '</tr>';
                break;
            case 'payrecord':
                html += '<tr>';
                html += '<td>' + row.back_date + '</td>';
                html += '<td>' + row.stages + '</td>';
                html += '<td>' + row.money + '</td>';
                html += '<td>' + row.zero_money + '</td>';
                html += '<td>' + row.payee_user_id + '</td>';
                html += '<td>' + row.create_time + '</td>';
                html += '<td>';
                html += '    <lqf_link><a class="ajax-open" data-url="{:url(\'FinPayRecord/edit\')}"  data-ids="{\'id\':\'' + row.id + '\'}" data-title="修改" data-calback="ajaxDetailData($(\'.ajax-list-table.payrecord\'))">修改</a></lqf_link>';
                html += '    <lqf_link><a class="ajax-del" data-url="{:url(\'FinPayRecord/del\')}"  data-ids="{\'id\':\'' + row.id + '\'}"  data-calback="ajaxDetailData($(\'.ajax-list-table.payrecord\'))">删除</a></lqf_link>';
                html += '</td>';
                html += '</tr>';
                break;
            case 'invoice':
                html += '<tr>';
                html += '<td>' + row.pay_date + '</td>';
                html += '<td>' + row.invoice_no + '</td>';
                html += '<td>' + row.money + '</td>';
                html += '<td>' + row.stages + '</td>';
                html += '<td>' + row.handle_user_id + '</td>';
                html += '<td>' + row.create_time + '</td>';
                html += '<td>' + row.remark + '</td>';
                html += '<td>';
                html += '    <lqf_link><a class="ajax-open" data-url="{:url(\'FinInvoiceRece/edit\')}"  data-ids="{\'id\':\'' + row.id + '\'}" data-title="修改" data-calback="ajaxDetailData($(\'.ajax-list-table.invoice\'))">修改</a></lqf_link>';
                html += '    <lqf_link><a class="ajax-del" data-url="{:url(\'FinInvoiceRece/del\')}"  data-ids="{\'id\':\'' + row.id + '\'}"  data-calback="ajaxDetailData($(\'.ajax-list-table.invoice\'))">删除</a></lqf_link>';
                html += '</td>';
                html += '</tr>';
                break;
            default:
                html = "";
        }
    });
    return html
}

</script>